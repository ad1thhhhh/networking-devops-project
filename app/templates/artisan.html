{% extends "base.html" %}
{% block content %}

<h1 class="text-4xl font-bold mb-10">Artisan Dashboard</h1>

<!-- SUMMARY SECTION -->
<div class="grid md:grid-cols-2 gap-6 mb-12">

    <div class="glass p-6 rounded-2xl hover:scale-105 hover:shadow-xl hover:shadow-gold/20 transition duration-300">
        <p class="text-gray-400">Total Tasks</p>
        <p class="text-4xl font-bold text-gold mt-2">
            {{ tasks|length }}
        </p>
    </div>

    <div class="glass p-6 rounded-2xl hover:scale-105 hover:shadow-xl hover:shadow-green-500/20 transition duration-300">
        <p class="text-gray-400">Completed</p>
        <p class="text-4xl font-bold text-green-400 mt-2">
            {{ tasks|selectattr("completed")|list|length }}
        </p>
    </div>

</div>

<!-- TASK LIST -->
<div class="glass p-8 rounded-2xl">
    <h2 class="text-2xl mb-6">Your Tasks</h2>

    {% if tasks|length == 0 %}
        <p class="text-gray-500">No tasks assigned yet.</p>
    {% endif %}

    <div class="space-y-4">

        {% for task in tasks %}
        <div class="p-5 bg-black/40 rounded-xl flex justify-between items-center hover:bg-black/60 hover:scale-[1.01] transition duration-300">

            <div>
                <p class="text-lg font-medium">
                    {{ task.title }}
                </p>

                {% if task.completed %}
                    <p class="text-green-400 text-sm mt-1">
                        âœ” Completed
                    </p>
                {% else %}
                    <p class="text-yellow-400 text-sm mt-1">
                        In Progress
                    </p>
                {% endif %}
            </div>

            <!-- COMPLETE BUTTON -->
            {% if not task.completed %}
            <a href="/complete/{{ task.id }}"
               class="px-5 py-2 bg-green-500 text-white rounded-lg 
                      hover:scale-110 hover:bg-green-400 
                      active:scale-95 
                      transition duration-200 shadow-md">
                Complete
            </a>
            {% else %}
            <span class="px-5 py-2 bg-green-500/20 text-green-400 rounded-lg">
                Done
            </span>
            {% endif %}

        </div>
        {% endfor %}

    </div>
</div>

{% endblock %}
